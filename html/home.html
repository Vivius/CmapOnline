<!DOCTYPE html>
<html lang="fr" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Accueil</title>
    <link rel="stylesheet" type="text/css" href="/css/animate.css"/>
    <link rel="stylesheet" type="text/css" href="/css/app.css"/>
    <link rel="stylesheet" type="text/css" href="/css/homepage.css"/>

</head>
<body >
    <div id="app" >
        <div class="menu">
            <div id="logo"><a href="/home"><img src="/images/home/network.png"  alt="Network logo"></a></div>
            <div id="title">CmapOnline</div>
            <button class="menuButton" id="new"  v-on:click="seenBlackOverlay = true; seenBoxNewGraph = true">New graph</button>
            <button class="menuButton" v-on:click="logout()">Log out</button>
            <div id="user">{{ currentUser.firstname }} {{ currentUser.lastname }}</div>
        </div>
        <div class="table" >
            <div class="row header blue">
                <div class="cell">
                    Graphs name
                </div>
                <div class="cell">
                    Creation date
                </div>
                <div class="cell">
                    Owner
                </div>
                <div align='right' class="cell action">
                    Access
                </div>
                <div align='right' class="cell action">
                    Export
                </div>
                <div align='right' class="cell action">
                    View
                </div>
                <div align='right' class="cell action">
                    Edit
                </div>
                <div align='right' class="cell action">
                    Delete
                </div>
            </div>
            <div  class="row" v-for="(graph,index) in graphs">
                <div class="cell">
                    {{ graph.name }}
                </div>
                <div class="cell">
                    {{ graph.date | convertDate}}
                </div>
                <div class="cell">
                    {{ graph.owner }}
                </div>
                <div align='right' class="cell"  v-on:click="seenBlackOverlay = true; seenBoxAccess = true; getAccess(graph._id)">
                    <img src="/images/home/door-key.png">
                </div>
                <div align='right' class="cell">
                    <img src="/images/home/export.png">
                </div>
                <div align='right' class="cell">
                    <img src="/images/home/eye.png" v-on:click="redirectToViewer(graph._id)">
                </div>
                <div align='right' class="cell">
                    <img src="/images/home/edit.png" v-on:click="redirectToEditor(graph._id)">
                </div>
                <div align='right' class="cell">
                    <img  src="/images/home/eraser.png" v-on:click="seenBlackOverlay = true; seenBoxConfirm = true; graphID = graph._id">
                </div>
            </div>
        </div>


        <div v-if="seenBlackOverlay" v-bind:style="styleObject" id="black_overlay" style="width: 100%;"> </div>

        <div v-if="seenBoxNewGraph" v-bind:style="styleObject" class="added" style="display: block;">
            <img src="/images/home/m_close-icon.png" width="20" height="20" class="close" v-on:click="seenBoxNewGraph = false; seenBlackOverlay = false">
            <h3>New graph</h3>
            <input type="text" v-model="name" placeholder="Graph name">
            <button v-on:click="insertGraph">Create</button>
        </div>

        <div v-if="seenBoxConfirm" v-bind:style="styleObject" class="added" style="display: block;">
            <img src="/images/home/m_close-icon.png" width="20" height="20" class="close" v-on:click="seenBoxConfirm = false;seenBlackOverlay = false">
            <h3>Are you sure ?</h3>
            <button v-on:click="deleteGraph(graphID);">Yes</button>
            <button v-on:click="seenBoxConfirm = false;seenBlackOverlay = false">No</button>
        </div>

        <div v-if="seenBoxAccess" v-bind:style="styleObject" class="added boxAccess" style="display: block;">
            <img src="/images/home/m_close-icon.png" width="20" height="20" class="close" v-on:click="seenBoxAccess = false;seenBlackOverlay = false">
            <h3>Access permission : </h3>
            <div class="currentAccess">
                <div class="row header red ">
                    <div class="cell">
                        Mail
                    </div>
                    <div class="cell">
                        Access
                    </div>
                </div>
                <div class="row">
                    <div class="cell">
                        {{currentUser.mail}}<b> (Owner)</b>
                    </div>
                    <div class="cell">
                        -
                    </div>
                </div>
                <div class="row"  v-for="(user,index) in read">
                    <div class="cell">
                        {{user.mail}}
                    </div>
                    <div class="cell">
                        <form action="">
                            <input type="radio" name="access" value="read"> Read
                            <input type="radio" name="access" value="write"> Write
                        </form>
                    </div>
                </div>
                <div class="row"  v-for="(user,index) in write">
                    <div class="cell">
                        {{user.mail}}
                    </div>
                    <div class="cell">
                        <form action="">
                                <input type="radio" name="access" value="read"> Read
                                <input type="radio" name="access" value="write"> Write
                        </form>
                    </div>
                </div>

                <div class="row">
                    <div class="cell addcell">
                        <input type="text" class="addAccesInput" v-model="mail" placeholder="Add one more person">
                    </div>
                    <div class="cell">
                        <form action="">
                            <input type="radio" name="access" value="read"> Read
                            <input type="radio" name="access" value="write"> Write
                        </form>
                    </div>
                </div>
            </div>

            <button v-on:click="addAccess">Add access</button>
        </div>
    </div>
    <script src="/js/home.js"></script>


</body>
</html>